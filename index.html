<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SR FOOD'S</title>

<style>
  body{font-family:Arial;margin:0;padding:0;background:#f8f8f8;}
  header{text-align:center;padding:15px;background:#fc8019;color:#fff;font-size:24px;font-weight:bold;}
  .container{padding:15px;max-width:500px;margin:auto;}
  input, button, textarea{width:100%;padding:10px;margin:8px 0;border-radius:5px;border:1px solid #ccc;}
  button{background:#fc8019;color:white;border:none;font-size:16px;}
  .product-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
  .card{background:#fff;padding:10px;border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,0.1);}
  .hidden{display:none;}
  .about{text-align:center;margin-top:20px;}
  .about img{width:50px;margin:5px;cursor:pointer;}
</style>

<!-- Firebase SDK -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";
  import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAtx80kAGnt8OXSaCV7n1exUV86lTDDogw",
    authDomain: "sr-foods.firebaseapp.com",
    projectId: "sr-foods",
    storageBucket: "sr-foods.firebasestorage.app",
    messagingSenderId: "500836759028",
    appId: "1:500836759028:web:98cedcdfbcd09bba97f5a1",
    measurementId: "G-DSR915501T"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const provider = new GoogleAuthProvider();

  // Sample Products
  const products = [
    {name:"Chicken Pickle bone", price:1100, disclaimer:"Contains bones."},
    {name:"Chicken Gongura Pickle bone", price:1050, disclaimer:"Contains bones."},
    {name:"Chicken Boneless Pickle", price:1200, disclaimer:"Boneless."},
    {name:"Chicken Boneless Gongura Pickle", price:1150, disclaimer:"Boneless."},
    {name:"Mutton Pickle bone", price:2000, disclaimer:"Contains bones."},
    {name:"Mutton Gongura Pickle bone", price:1900, disclaimer:"Contains bones."},
    {name:"Mutton Boneless Pickle", price:2200, disclaimer:"Boneless."},
    {name:"Mutton Boneless Gongura Pickle", price:2100, disclaimer:"Boneless."},
    {name:"Prawn Pickel big", price:2000, disclaimer:"Contains shell."},
    {name:"Prawn Gongura Pickle", price:1900, disclaimer:"Contains shell."},
    {name:"Methadlu Fish Pickle", price:1500, disclaimer:"Spicy."},
    {name:"Normal Fish Pickle", price:1500, disclaimer:"Spicy."},
    {name:"Korameenu Fish Pickle", price:2400, disclaimer:"Spicy."},
    {name:"Sandhuva Fish Pickle", price:2400, disclaimer:"Spicy."},
    {name:"Vanjaram Fish Pickle", price:2400, disclaimer:"Spicy."},
    {name:"Pandu Kappa Fish Pickle", price:2400, disclaimer:"Spicy."}
  ];

  let currentUser = null;
  let cart = [];

  // ---------- AUTH FUNCTIONS ----------
  async function registerUser(email,password){
    try{
      const userCredential = await createUserWithEmailAndPassword(auth,email,password);
      alert("Registered!");
      currentUser = userCredential.user;
      showDetailsForm();
    } catch(err){ alert(err.message); }
  }

  async function loginUser(email,password){
    try{
      const userCredential = await signInWithEmailAndPassword(auth,email,password);
      alert("Login Successful!");
      currentUser = userCredential.user;
      showProducts();
    } catch(err){ alert(err.message); }
  }

  async function loginGoogle(){
    try{
      const result = await signInWithPopup(auth, provider);
      alert("Login Successful! Welcome "+result.user.displayName);
      currentUser = result.user;
      showProducts();
    } catch(err){ alert(err.message); }
  }

  async function saveDetails(){
    const name = document.getElementById("name").value;
    const phone = document.getElementById("phone").value;
    const address = document.getElementById("address").value;
    if(!name || !phone || !address){ alert("Fill all fields"); return; }
    await setDoc(doc(db,"users",currentUser.uid),{name,phone,address});
    alert("Details Saved!");
    showProducts();
  }

  // ---------- UI FUNCTIONS ----------
  function showDetailsForm(){
    document.getElementById("loginPage").classList.add("hidden");
    document.getElementById("detailsPage").classList.remove("hidden");
  }

  function showProducts(){
    document.getElementById("loginPage").classList.add("hidden");
    document.getElementById("detailsPage").classList.add("hidden");
    document.getElementById("productsPage").classList.remove("hidden");
    displayProducts();
  }

  function displayProducts(){
    const container = document.getElementById("productGrid");
    container.innerHTML = "";
    products.forEach(p=>{
      const card = document.createElement("div");
      card.classList.add("card");
      card.innerHTML = `<h4>${p.name}</h4><p>Price: â‚¹${p.price}</p><p style="font-size:12px;color:red;">${p.disclaimer}</p>
      <button onclick="addToCart('${p.name}',${p.price})">Add to Cart</button>`;
      container.appendChild(card);
    });
  }

  function addToCart(name,price){
    cart.push({name,price});
    alert(name+" added to cart");
  }
</script>
</head>

<body>

<header>SR FOODS</header>
<div class="container">

  <!-- Login Page -->
  <div id="loginPage">
    <h2>Login / Register</h2>
    <input type="email" id="email" placeholder="Email">
    <input type="password" id="password" placeholder="Password">
    <button onclick="loginUser(email.value,password.value)">Login</button>
    <button onclick="registerUser(email.value,password.value)">Register</button>
    <button onclick="loginGoogle()">Login with Google</button>
  </div>

  <!-- Details Form -->
  <div id="detailsPage" class="hidden">
    <h2>Enter Your Details</h2>
    <input type="text" id="name" placeholder="Full Name">
    <input type="text" id="phone" placeholder="Phone Number">
    <textarea id="address" placeholder="Full Address"></textarea>
    <button onclick="saveDetails()">Save Details</button>
  </div>

  <!-- Products Page -->
  <div id="productsPage" class="hidden">
    <h2>Products</h2>
    <div id="productGrid" class="product-grid"></div>
  </div>

  <!-- About Us -->
  <div class="about">
    <h2>About SR FOODS</h2>
    <p>AUTHENTIC GODAVARI TASTE</p>
    <p>Since 2024</p>
    <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" onclick="window.open('https://www.instagram.com/sr_foods_offical','_blank')" alt="Instagram">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" onclick="window.open('https://wa.me/9492369911','_blank')" alt="WhatsApp">
    <h3>Reviews</h3>
    <div id="reviews">No reviews yet.</div>
  </div>

</div>
</body>
</html>
